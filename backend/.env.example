# ==================== 应用配置 ====================
NODE_ENV=development
PORT=3000
HOST=0.0.0.0

# ==================== 数据库配置 ====================
# PostgreSQL 连接字符串
# 格式: postgresql://用户名:密码@主机:端口/数据库名
DATABASE_URL="postgresql://postgres:password@localhost:5432/license_store"

# ==================== Redis 配置 ====================
# Redis 连接字符串 (用于缓存和验证码)
REDIS_URL="redis://localhost:6379"
# 或者分开配置
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=

# ==================== JWT 配置 ====================
# JWT 密钥 (建议使用 openssl rand -base64 32 生成)
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"
JWT_EXPIRES_IN="24h"

# ==================== 加密配置 ====================
# 密钥加密密钥 (32字节, 使用 openssl rand -hex 32 生成)
ENCRYPTION_KEY="your-32-byte-encryption-key-change-this"
# ENCRYPTION_ALGORITHM=aes-256-gcm

# ==================== 支付宝配置 ====================
ALIPAY_APP_ID="your-alipay-app-id"
# 应用私钥 (需要替换为实际的私钥，注意保密)
ALIPAY_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----"
# 支付宝公钥
ALIPAY_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nALIPAY_PUBLIC_KEY_HERE\n-----END PUBLIC KEY-----"
# 支付网关 (沙箱环境: https://openapi.alipaydev.com/gateway.do, 正式环境: https://openapi.alipay.com/gateway.do)
ALIPAY_GATEWAY="https://openapi.alipaydev.com/gateway.do"
# 支付成功回调地址
ALIPAY_NOTIFY_URL="https://yourdomain.com/api/payments/alipay/notify"
# 支付成功返回地址
ALIPAY_RETURN_URL="https://yourdomain.com/checkout/success"

# ==================== 微信支付配置 ====================
WECHAT_APP_ID="your-wechat-app-id"
WECHAT_MCH_ID="your-merchant-id"
WECHAT_API_KEY="your-api-key"
WECHAT_NOTIFY_URL="https://yourdomain.com/api/payments/wechat/notify"
# 微信支付 API 证书路径 (可选，用于退款等高级功能)
# WECHAT_CERT_PATH="./certs/apiclient_cert.pem"
# WECHAT_KEY_PATH="./certs/apiclient_key.pem"

# ==================== 邮件服务配置 ====================
# SMTP 配置 (推荐使用 Gmail, Resend, SendGrid 等)
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-app-password"
EMAIL_FROM="noreply@yourstore.com"
EMAIL_FROM_NAME="虚拟产品商店"

# ==================== IP 地理位置服务 ====================
# 使用本地 GeoIP 数据库 (geoip-lite, 免费)
GEO_PROVIDER="geoip-lite"

# 或使用在线 API (ip-api.com, 免费版每分钟45次请求)
# GEO_PROVIDER="ip-api"
# IPAPI_KEY=""  # 免费版不需要

# 或使用 MaxMind GeoIP2
# GEO_PROVIDER="maxmind"
# MAXMIND_LICENSE_KEY="your-license-key"

# ==================== 支付回调地址 ====================
PAYMENT_CALLBACK_URL="http://localhost:3000"

# ==================== 通知服务配置 ====================
# Server酱 (ServerChan) - 微信推送服务
# 获取 SendKey: https://sct.ftqq.com/
SERVERCHAN_SEND_KEY="your-serverchan-send-key"

# 企业微信机器人
# 获取 Webhook URL: https://work.weixin.qq.com/
# WECOM_WEBHOOK_URL="https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=xxxxx"

# ==================== 库存预警配置 ====================
INVENTORY_ALERT_THRESHOLD=10
# 管理员邮箱 (接收库存预警)
INVENTORY_ADMIN_EMAIL="admin@yourstore.com"
# 检查间隔 (秒，默认 3600 = 1小时)
INVENTORY_CHECK_INTERVAL=3600

# ==================== 前端地址 (CORS) ====================
FRONTEND_URL="http://localhost:3001"
ADMIN_URL="http://localhost:3002"

# ==================== 文件上传配置 (可选) ====================
# 使用 AWS S3
# AWS_ACCESS_KEY_ID="your-access-key"
# AWS_SECRET_ACCESS_KEY="your-secret-key"
# AWS_REGION="us-east-1"
# AWS_S3_BUCKET="your-bucket-name"

# 或使用 Cloudinary
# CLOUDINARY_CLOUD_NAME="your-cloud-name"
# CLOUDINARY_API_KEY="your-api-key"
# CLOUDINARY_API_SECRET="your-api-secret"

# ==================== 日志配置 ====================
LOG_LEVEL="info"  # debug, info, warn, error

# ==================== Rate Limiting ====================
RATE_LIMIT_MAX=100  # 每个IP每分钟最大请求数
RATE_LIMIT_WINDOW=60000  # 时间窗口 (毫秒)
